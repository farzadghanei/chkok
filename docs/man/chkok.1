.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "CHKOK" 1 "2024-05-16" "0.3.1" "General Command Manuals"
.SH NAME
chkok \- Check if file attributes are OK
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
chkok [OPTIONS]
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
chkok checks if attributes of files and sockets match the provided conditions to ensure
system state is as expected. It can be used to monitor system health and resource availability.
Provides different running modes, useful for reporting to local and remote monitoring.
.SH OPTIONS
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
\-conf string
      path to configuration file in YAML format (default \(dq/etc/chkok.yaml\(dq)
\-mode string
      running mode: cli,http (default \(dqcli\(dq)
\-verbose
      more output, include logs
.ft P
.fi
.UNINDENT
.UNINDENT
.SH CONFIGURATION
.sp
Configuration is done via a YAML file.
.sp
\fIrunners\fP section configures how the checks should be run. The runner configurations
are merged with the \fIdefault\fP runner configuration.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
runners:
    default:
        timeout: 5m
        # response_ok: \(dqOK\(dq
        # response_fail: \(dqFAILED\(dq
        # response_timeout: \(dqTIMEOUT\(dq
    cli: {}  # override default runner only for CLI mode
    http:  # override default runner only for HTTP mode
        listen_address: \(dq127.0.0.1:51234\(dq
        # request_read_timeout: 2s
        # response_write_timeout: 2s
        # timeout: 5s
        # max_header_bytes: 8192
        # max_concurrent_requests: 1  # 0 means no limit
        # request_required_headers:
        #   \(dqX\-Required\-Header\(dq: \(dqrequired\-value\(dq
        #   \(dqX\-Required\-Header2\(dq: \(dq\(dq  # header existence is required, not value
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The \fIcheck_suites\fP section defines the checks to be run. Each check suite
is a logical group of checks that should run sequentially.
Each check defines the expected properties of the resource (file or socket)
to be checked.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
check_suites:
  etc:
    \- type: dir
      path: /etc
      mode: 0755
      user: root
      group: root
    \- type: file
      path: /etc/passwd
      min_size: 10
    \- type: file
      path: /etc/group
      min_size: 5
      max_size: 10000
  default:
    \- type: file
      path: /unwanted/file
      absent: true
    \- type: dial
      network: tcp
      address: \(dqlocalhost:22\(dq
      timeout: 500ms
.ft P
.fi
.UNINDENT
.UNINDENT
.SH FILES
.INDENT 0.0
.TP
.B \fB/etc/chkok.yaml\fP
The default configuration file, if available should contain valid configuration in YAML format.
.UNINDENT
.SH REPORTING BUGS
.sp
Bugs can be reported with \fI\%https://github.com/farzadghanei/chkok/issues\fP
.SH AUTHOR
Farzad Ghanei
.SH COPYRIGHT
Copyright (c) 2024 Farzad Ghanei. chkok is an open source project released under the terms of the MIT license.
.\" Generated by docutils manpage writer.
.
